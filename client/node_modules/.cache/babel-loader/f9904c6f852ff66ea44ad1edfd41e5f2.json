{"ast":null,"code":"var _jsxFileName = \"/home/michael/Desktop/chat-app/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport \"./App.css\";\nimport { io } from \"socket.io-client\";\nimport { useState, useEffect } from \"react\";\nimport Chat from \"./Chat\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"https://still-headland-15979.herokuapp.com/\");\n\nfunction App() {\n  _s();\n\n  const [username, setUsername] = useState();\n  const [room, setRoom] = useState(\"\");\n  const [showChat, setShowChat] = useState(false);\n  const [usersOnline, setUsersOnline] = useState([]);\n  const [socketId, setSocketId] = useState(\"\");\n\n  const joinRoom = () => {\n    if (username !== \"\" && room !== \"\") {\n      socket.emit(\"online\", {\n        room,\n        username,\n        socketId\n      });\n      const isUserOnline = usersOnline.find(user => user.room === room && user.username === username);\n\n      if (isUserOnline) {\n        alert(`${username} is used inside ${room}, please choose another name!`);\n      } else {\n        socket.emit(\"join_room\", {\n          room,\n          username,\n          socketId\n        });\n        setShowChat(true);\n      }\n    }\n  };\n\n  useEffect(() => {\n    socket.on(\"user_online\", _ref => {\n      let {\n        username,\n        room,\n        socketId\n      } = _ref;\n      setUsersOnline([...usersOnline, {\n        username,\n        room,\n        socketId\n      }]);\n    });\n  }, [socketId, usersOnline]);\n  useEffect(() => {\n    socket.on(\"user_offline\", socketId => {\n      const removeUserOnline = usersOnline.filter(user => user.socketId !== socketId);\n      setUsersOnline(removeUserOnline);\n    });\n  }, [usersOnline]);\n  useEffect(() => {\n    socket.on(\"clientConnected\", socketId => {\n      setSocketId(socketId);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: showChat ? /*#__PURE__*/_jsxDEV(Chat, {\n      socket: socket,\n      username: username,\n      room: room\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"joinChatContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Join Chatroom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Username\",\n          onChange: event => setUsername(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Room ID\",\n          onChange: event => setRoom(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        display: \"flex\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: joinRoom,\n          children: \"Join\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"sf4+qCJZ123GB7tflY95KLjhkHo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["io","useState","useEffect","Chat","socket","connect","App","username","setUsername","room","setRoom","showChat","setShowChat","usersOnline","setUsersOnline","socketId","setSocketId","joinRoom","emit","isUserOnline","find","user","alert","on","removeUserOnline","filter","event","target","value"],"sources":["/home/michael/Desktop/chat-app/client/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport { io } from \"socket.io-client\";\nimport { useState, useEffect } from \"react\";\nimport Chat from \"./Chat\";\n\nconst socket = io.connect(\"https://still-headland-15979.herokuapp.com/\");\n\nfunction App() {\n  const [username, setUsername] = useState();\n  const [room, setRoom] = useState(\"\");\n  const [showChat, setShowChat] = useState(false);\n  const [usersOnline, setUsersOnline] = useState([]);\n  const [socketId, setSocketId] = useState(\"\");\n\n  const joinRoom = () => {\n    if (username !== \"\" && room !== \"\") {\n      socket.emit(\"online\", { room, username, socketId });\n      const isUserOnline = usersOnline.find(\n        (user) => user.room === room && user.username === username\n      );\n      if (isUserOnline) {\n        alert(\n          `${username} is used inside ${room}, please choose another name!`\n        );\n      } else {\n        socket.emit(\"join_room\", { room, username, socketId });\n        setShowChat(true);\n      }\n    }\n  };\n\n  useEffect(() => {\n    socket.on(\"user_online\", ({ username, room, socketId }) => {\n      setUsersOnline([...usersOnline, { username, room, socketId }]);\n    });\n  }, [socketId, usersOnline]);\n\n  useEffect(() => {\n    socket.on(\"user_offline\", (socketId) => {\n      const removeUserOnline = usersOnline.filter(\n        (user) => user.socketId !== socketId\n      );\n      setUsersOnline(removeUserOnline);\n    });\n  }, [usersOnline]);\n\n  useEffect(() => {\n    socket.on(\"clientConnected\", (socketId) => {\n      setSocketId(socketId);\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {showChat ? (\n        <Chat socket={socket} username={username} room={room} />\n      ) : (\n        <div className=\"joinChatContainer\">\n          <div>\n            <h3>Join Chatroom</h3>\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              onChange={(event) => setUsername(event.target.value)}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Room ID\"\n              onChange={(event) => setRoom(event.target.value)}\n            />\n          </div>\n          <div display=\"flex\">\n            <button onClick={joinRoom}>Join</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;;AAAA,OAAO,WAAP;AACA,SAASA,EAAT,QAAmB,kBAAnB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,IAAP,MAAiB,QAAjB;;AAEA,MAAMC,MAAM,GAAGJ,EAAE,CAACK,OAAH,CAAW,6CAAX,CAAf;;AAEA,SAASC,GAAT,GAAe;EAAA;;EACb,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BP,QAAQ,EAAxC;EACA,MAAM,CAACQ,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,KAAD,CAAxC;EACA,MAAM,CAACY,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,EAAD,CAA9C;EACA,MAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,EAAD,CAAxC;;EAEA,MAAMgB,QAAQ,GAAG,MAAM;IACrB,IAAIV,QAAQ,KAAK,EAAb,IAAmBE,IAAI,KAAK,EAAhC,EAAoC;MAClCL,MAAM,CAACc,IAAP,CAAY,QAAZ,EAAsB;QAAET,IAAF;QAAQF,QAAR;QAAkBQ;MAAlB,CAAtB;MACA,MAAMI,YAAY,GAAGN,WAAW,CAACO,IAAZ,CAClBC,IAAD,IAAUA,IAAI,CAACZ,IAAL,KAAcA,IAAd,IAAsBY,IAAI,CAACd,QAAL,KAAkBA,QAD/B,CAArB;;MAGA,IAAIY,YAAJ,EAAkB;QAChBG,KAAK,CACF,GAAEf,QAAS,mBAAkBE,IAAK,+BADhC,CAAL;MAGD,CAJD,MAIO;QACLL,MAAM,CAACc,IAAP,CAAY,WAAZ,EAAyB;UAAET,IAAF;UAAQF,QAAR;UAAkBQ;QAAlB,CAAzB;QACAH,WAAW,CAAC,IAAD,CAAX;MACD;IACF;EACF,CAfD;;EAiBAV,SAAS,CAAC,MAAM;IACdE,MAAM,CAACmB,EAAP,CAAU,aAAV,EAAyB,QAAkC;MAAA,IAAjC;QAAEhB,QAAF;QAAYE,IAAZ;QAAkBM;MAAlB,CAAiC;MACzDD,cAAc,CAAC,CAAC,GAAGD,WAAJ,EAAiB;QAAEN,QAAF;QAAYE,IAAZ;QAAkBM;MAAlB,CAAjB,CAAD,CAAd;IACD,CAFD;EAGD,CAJQ,EAIN,CAACA,QAAD,EAAWF,WAAX,CAJM,CAAT;EAMAX,SAAS,CAAC,MAAM;IACdE,MAAM,CAACmB,EAAP,CAAU,cAAV,EAA2BR,QAAD,IAAc;MACtC,MAAMS,gBAAgB,GAAGX,WAAW,CAACY,MAAZ,CACtBJ,IAAD,IAAUA,IAAI,CAACN,QAAL,KAAkBA,QADL,CAAzB;MAGAD,cAAc,CAACU,gBAAD,CAAd;IACD,CALD;EAMD,CAPQ,EAON,CAACX,WAAD,CAPM,CAAT;EASAX,SAAS,CAAC,MAAM;IACdE,MAAM,CAACmB,EAAP,CAAU,iBAAV,EAA8BR,QAAD,IAAc;MACzCC,WAAW,CAACD,QAAD,CAAX;IACD,CAFD;EAGD,CAJQ,EAIN,EAJM,CAAT;EAMA,oBACE;IAAK,SAAS,EAAC,KAAf;IAAA,UACGJ,QAAQ,gBACP,QAAC,IAAD;MAAM,MAAM,EAAEP,MAAd;MAAsB,QAAQ,EAAEG,QAAhC;MAA0C,IAAI,EAAEE;IAAhD;MAAA;MAAA;MAAA;IAAA,QADO,gBAGP;MAAK,SAAS,EAAC,mBAAf;MAAA,wBACE;QAAA,wBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,IAAI,EAAC,MADP;UAEE,WAAW,EAAC,UAFd;UAGE,QAAQ,EAAGiB,KAAD,IAAWlB,WAAW,CAACkB,KAAK,CAACC,MAAN,CAAaC,KAAd;QAHlC;UAAA;UAAA;UAAA;QAAA,QAFF,eAOE;UACE,IAAI,EAAC,MADP;UAEE,WAAW,EAAC,SAFd;UAGE,QAAQ,EAAGF,KAAD,IAAWhB,OAAO,CAACgB,KAAK,CAACC,MAAN,CAAaC,KAAd;QAH9B;UAAA;UAAA;UAAA;QAAA,QAPF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAcE;QAAK,OAAO,EAAC,MAAb;QAAA,uBACE;UAAQ,OAAO,EAAEX,QAAjB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAdF;IAAA;MAAA;MAAA;MAAA;IAAA;EAJJ;IAAA;IAAA;IAAA;EAAA,QADF;AA0BD;;GAvEQX,G;;KAAAA,G;AAyET,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}